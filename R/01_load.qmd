---
title: "01_load"
format:
  html:
    embed-resources: true
editor: visual
---

```{r, message=FALSE, running=FALSE}
library(tidyverse)
library(here)
```

# Loading Data

```{r}
raw_dir <- here("data/data_raw")
data_file <- "mouse_cell_stages.zip"
data_loc <- "https://www.dropbox.com/scl/fi/d63o8sgp03fyu2s6tsqau/group_6_data.zip?rlkey=50z2rrfaowoizqivttdmyym2i&st=kngr6y9j&dl=1"


if( !dir.exists(raw_dir) ){
  dir.create(path = raw_dir)
}
if( !file.exists(str_c(raw_dir, data_file, sep = "/")) ){
  download.file(
    url = data_loc,
    destfile = str_c(raw_dir, data_file, sep = "/"))
}
# Unzip the proteomics data

unzip(str_c(raw_dir, data_file, sep = "/"), exdir = raw_dir)
```

```{r, message=FALSE, running=FALSE}

# read in csv files for all cell populations

df_hsc <- read_csv2(file = here("data/raw_data/group6_data_HSC_Report.csv"), na="NaN")
df_mep <- read_csv2(file = here("data/raw_data/group6_data_MEP_Report.csv"), na="NaN")
df_gmp <- read_csv2(file = here("data/raw_data/group6_data_GMP_Report.csv"), na="NaN")
df_clp <- read_csv2(file = here("data/raw_data/group6_data_CLP_Report.csv"), na="NaN")
df_cmp <- read_csv2(file = here("data/raw_data/group6_data_CMP_Report.csv"), na="NaN")


#| echo: false
#| eval: false

```

### Save the data-file for 02_clean.qmd

```{r}
data_path <- here("data")
file_name <- "01_df_intensities.tsv.gz"

write_tsv(df_hsc, file = here("data/01_hsc.tsv"))
write_tsv(df_mep, file = here("data/01_mep.tsv"))
write_tsv(df_gmp, file = here("data/01_gmp.tsv"))
write_tsv(df_clp, file = here("data/01_clp.tsv"))
write_tsv(df_cmp, file = here("data/01_cmp.tsv"))
```
